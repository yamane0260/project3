# プロジェクト概要

このリポジトリは Vite + React + TypeScript 構成のフロントエンドです。展示体験用のサイト「花をいけて、光をあわせて、赤をみつける」をローカル/同一LAN上のスマートフォンからアクセスできるように構成しています。

## 必要要件
- Node.js 18 以上（推奨: LTS）
- npm 9 以上

## セットアップ
```bash
# 依存関係をインストール
npm ci  # lockfile を利用（なければ: npm install）
```

## 開発（PC とスマートフォンで同一LANアクセス）
Vite の開発サーバは `vite.config.ts` で LAN 公開（`server.host: true`）が有効化されています。

```bash
# 開発サーバを起動（PC上で実行）
npm run dev
```

起動後、ターミナルに以下のようなURLが表示されます。
- Local: `http://localhost:5173/`
- Network: `http://<あなたのPCのIPアドレス>:5173/`

同一のWi-Fi/LANに接続したスマートフォンのブラウザから、上記 Network のURLにアクセスしてください。

### PCのIPアドレスの確認方法（macOS）
```bash
ipconfig getifaddr en0   # Wi-Fi の場合の例（有線は en1 など）
```
表示されたIP（例: `192.168.1.23`）を使って `http://192.168.1.23:5173/` にアクセスします。

### 注意
- ファイアウォールでポート 5173 をブロックしていると接続できません。
- 社内/学内ネットワークでは端末間通信が制限されている場合があります。
- うまく繋がらない場合は、PCとスマホを同じSSIDに接続し直し、PC側でVPN等をオフにしてください。

## プロダクションビルド
```bash
# 最適化ビルド（dist/ 生成）
npm run build

# 生成物のプレビュー（LAN公開有効）
npm run preview
```
`npm run preview` 実行時も、Network のURLが表示されます。スマートフォンから確認可能です。

## PWA/オフライン動作
- `index.html` で `manifest.webmanifest` を参照しています。
- `js/app.js` で `service-worker.js` を登録しています。
- iOS Safari では PWA の挙動が制限されることがあります。最新OSでの確認を推奨します。

## トラブルシューティング
- スマホでアクセスできない
  - **同一LANに接続**していることを確認
  - **IPアドレス**でアクセス（`localhost`は使えません）
  - **ファイアウォール/セキュリティソフト**を一時的に無効化して確認
  - **VPN**を切る
  - **学内ネットワークの端末間通信制限**がある場合、テザリングなど別ネットワークで検証
- 画面が崩れる/スタイルが当たらない
  - `css/main.css` のビルド/読み込みを確認
- オフラインで動かない
  - まずはオンラインで一度開いてキャッシュを作成
  - `service-worker.js` の更新時はキャッシュ削除またはハードリロード

## ライセンス
このリポジトリに特段の記載がない限り、学内展示用のサンプルとして扱います。

